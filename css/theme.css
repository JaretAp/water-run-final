/* =========================================
   Water Run â€” theme.css (single-source styles)
   ========================================= */

/* Brand tokens */
:root{
  --blue-bg:      #2FA9FF; /* page bg */
  --green-field:  #2D9B4B; /* playfield */
  --dark-obst:    #253331; /* dark elements */
  --yellow-jug:   #FFD84D; /* accent */
  --black-accent: #0C0E0F;
  --hud-light:    #A7D0EE;
  --error-red:    #FF585D;

  --font-display: "Montserrat", "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  --font-body:    "Montserrat", "Segoe UI", "Helvetica Neue", Arial, sans-serif;

  --radius-lg: 16px;
  --radius-sm: 12px;
}

/* Screen visibility (must match JS) */
.screen{
  display:none !important;
  flex:1 0 auto;
  min-height:0;
  width:100%;
  align-items:center;
  justify-content:center;
  padding:20px;
}
.screen.show{
  display:flex !important;
  flex:1 0 auto;
}

/* Global */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:var(--blue-bg);
  color:var(--black-accent);
  font-family:var(--font-body);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Panels (Start / Finish) */
.panel{
  background:transparent;
  color:var(--black-accent);
  text-align:center;
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:1.2rem;
}
.panel h1,
.panel h2{
  font-family:var(--font-display);
  font-size:clamp(2.4rem,6vw,3.6rem);
  font-weight:800;
  margin:0 0 .3rem 0;
  text-shadow:0 2px 4px rgba(0,0,0,.15);
}
.tagline{
  font-size:1.1rem;
  font-weight:600;
  color:var(--yellow-jug);
  font-style:italic;
  text-shadow:0 1px 2px rgba(0,0,0,.25);
  margin:0 0 18px;
}
.difficulty-picker{
  position:relative;
  border:2px solid rgba(12,14,15,0.35);
  border-radius:var(--radius-lg);
  padding:2.4rem 1.4rem 1.25rem;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:0.85rem 1.4rem;
  background:rgba(12,14,15,0.22);
  color:#fff;
}
.difficulty-picker legend{
  width:100%;
  margin:0;
  position:relative;
  top:22px;
  padding:0;
  text-transform:uppercase;
  letter-spacing:0.08em;
  font-size:1.18rem;
  font-weight:700;
  color:var(--yellow-jug);
  text-align:center;
  font-family:inherit;
}
.difficulty-option{
  display:flex;
  align-items:center;
  gap:0.55rem;
  font-weight:700;
  color:#fff;
  padding:0.55rem 0.85rem;
  border:1px solid rgba(255,216,77,0.45);
  border-radius:999px;
  background:rgba(8,12,18,0.55);
  transition:background .18s ease, border-color .18s ease, transform .18s ease;
}
.difficulty-option:hover{
  background:rgba(255,216,77,0.22);
  border-color:rgba(255,216,77,0.7);
  transform:translateY(-1px);
}
.difficulty-option input{
  width:1.15rem;
  height:1.15rem;
  accent-color:var(--yellow-jug);
  flex-shrink:0;
}
.difficulty-option span{
  font-size:1rem;
  letter-spacing:0.02em;
}

/* Buttons */
.btn{
  background:var(--dark-obst);
  color:var(--yellow-jug);
  border:0;
  border-radius:12px;
  padding:14px 28px;
  font-weight:800;
  font-size:1.1rem;
  min-width:180px;
  cursor:pointer;
  transition:filter .15s ease;
}
.btn:hover{ filter:brightness(1.08); }
.btn:disabled{ opacity:.6; cursor:not-allowed; }

/* Stage frame + canvas */
.stage-wrap{
  margin:18px auto;
  width:min(95vw,540px);
  aspect-ratio:2/3;
  background:var(--green-field);
  border:4px solid var(--dark-obst);
  border-radius:var(--radius-lg);
  overflow:hidden;
  box-shadow:0 8px 24px rgba(0,0,0,.25);
  position:relative;
}
#stage{
  width:100%;
  height:100%;
  display:block;
  background:var(--green-field);
}

/* HUD overlay inside stage */
.overlay-hud{
  position:absolute;
  top:8px;
  left:0;
  width:100%;
  display:flex;
  justify-content:space-between;
  padding:0 10px;
  z-index:3;
  pointer-events:none;
}
.hud-pill{
  background:rgba(12,14,15,0.55);
  color:#fff;
  font-weight:700;
  border-radius:12px;
  padding:6px 10px;
  display:flex;
  gap:6px;
  align-items:center;
}
.hud-pill strong{
  color:var(--yellow-jug);
  font-variant-numeric:tabular-nums;
}

/* Toast feedback */
.toast{
  position:absolute;
  left:50%;
  top:14px;
  transform:translateX(-50%);
  color:#fff;
  font-weight:800;
  text-shadow:0 2px 4px rgba(0,0,0,.6);
  opacity:0;
  transition:opacity .18s;
  pointer-events:none;
}

/* Instructions overlay */
.game-instructions{
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%, -50%);
  color:#fff;
  text-align:center;
  font-size:1rem;
  line-height:1.5;
  background:rgba(0,0,0,0.4);
  padding:16px 24px;
  border-radius:12px;
  max-width:360px;
  z-index:5;
  transition:opacity .3s ease;
}
.game-instructions.hidden{ opacity:0; pointer-events:none; }

.jug-icon{ width:20px; height:24px; vertical-align:-4px; margin:0 6px; }
.jug-yellow{ filter:drop-shadow(0 0 3px #ffd84d); }
.jug-black { filter:drop-shadow(0 0 3px #000); }

/* Finish specifics */
#screen-over h2{
  color:var(--error-red);
  font-size:clamp(3rem,7vw,4.4rem);
  letter-spacing:0.04em;
}
#screen-over .scoreline{
  font-weight:800;
  margin:6px 0 12px;
}
#screen-over .msg{
  color:var(--black-accent);
  font-style:italic;
  opacity:.9;
}

/* Footer */
.footer{
  text-align:center;
  color:var(--black-accent);
  padding:12px;
  font-size:.9rem;
  opacity:.9;
}

/* Optional jug watermark on Start/Finish (paths from /css/) */
#screen-start,
#screen-over{
  background:
    url("../assets/jerry_jug_yellow.svg") 10% 20% / 64px no-repeat,
    url("../assets/jerry_jug-black.svg") 86% 78% / 64px no-repeat,
    var(--blue-bg);
}

/* Small screens */
@media (max-width:420px){
  .panel{ padding:22px 18px; }
  .btn{ padding:12px 18px; }
}

/* In-game controls overlay (clickable) */
.overlay-ctrl{
  position:absolute;
  bottom:8px;   /* moved from top to bottom */
  right:10px;
  z-index:6;
  pointer-events:auto; /* must be clickable (overlay-hud uses none) */
}


.btn-ghost{
  background: rgba(12,14,15,0.35);
  color: #fff;
  border: 2px solid rgba(255,216,77,0.85);
}
.btn-ghost:hover{ filter:brightness(1.08); }

.btn-small{
  padding: 8px 12px;
  min-width: auto;
  font-size: .95rem;
  border-radius: 10px;
}

/* Touch support */
#stage, .stage-wrap {
  touch-action: none;            /* prevent scroll/zoom gestures */
  -webkit-user-select: none;
  user-select: none;
}

/* Invisible press zones (only show on touch devices) */
.touch-zone {
  position: absolute;
  left: 0;
  width: 100%;
  z-index: 6;
  pointer-events: auto;
}
.touch-zone.up   { top: 0;    height: 48%; }
.touch-zone.down { bottom: 0; height: 52%; }

/* On non-touch devices, disable the zones */
@media (hover: hover) and (pointer: fine) {
  .touch-zone { display: none; }
}

.site-footer{margin-top:auto;background:rgba(12,14,15,0.08);padding:18px 16px;}
.site-footer .footer-inner{display:flex;justify-content:center;align-items:center;gap:20px;flex-wrap:wrap;font-family:'Montserrat','Segoe UI','Helvetica Neue',Arial,sans-serif;font-weight:700;}
.site-footer a{color:var(--black-accent);text-decoration:none;letter-spacing:.02em;}
.site-footer a:hover{text-decoration:underline;}

.finish-congrats{
  color:var(--cw-yellow);
  text-shadow:0 1px 2px rgba(0,0,0,.35);
}

.best-times{
  background:linear-gradient(180deg, rgba(8,12,18,.92), rgba(8,12,18,.78));
  border:2px solid rgba(255,216,77,0.45);
  box-shadow:0 10px 24px rgba(0,0,0,0.38);
  color:var(--yellow-jug);
}
.best-times-title{
  color:var(--yellow-jug);
  text-shadow:0 1px 2px rgba(0,0,0,0.45);
}
.best-times-grid{
  background:rgba(20,28,40,0.32);
}
.best-times-item,
.best-times-item strong{
  color:var(--yellow-jug);
  text-shadow:0 1px 2px rgba(0,0,0,0.4);
}
.best-times-over{
  max-width:420px;
}
